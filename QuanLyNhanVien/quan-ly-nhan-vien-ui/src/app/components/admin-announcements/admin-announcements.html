<div class="page-container">
    <div class="page-header">
        <h2>Quản lý Thông báo</h2>
        <p class="subtitle">Gửi thông tin cập nhật đến toàn thể nhân viên</p>
    </div>
    <mat-card class="editor-card">
        <div class="card-title-box">
            <div class="icon-bg">
                <mat-icon>campaign</mat-icon>
            </div>
            <span>Soạn tin mới</span>
        </div>

        <mat-card-content>
            <form (ngSubmit)="createAnnouncement()">
                <div class="form-row">
                    <mat-form-field appearance="outline" class="title-field">
                        <mat-label>Tiêu đề thông báo</mat-label>
                        <input matInput [(ngModel)]="title" name="title" placeholder="Ví dụ: Lịch nghỉ lễ 30/4..." required>
                        <mat-icon matSuffix>edit</mat-icon>
                    </mat-form-field>
                    <div class="importance-toggle" [class.active]="isImportant" (click)="isImportant = !isImportant">
                        <mat-icon>{{ isImportant ? 'notifications_active' : 'notifications_none' }}</mat-icon>
                        <span>{{ isImportant ? 'Tin Quan Trọng!' : 'Tin thường' }}</span>
                    </div>
                </div>
                <mat-form-field appearance="outline" class="full-width content-field">
                    <mat-label>Nội dung chi tiết</mat-label>
                    <textarea matInput [(ngModel)]="content" name="content" rows="6" placeholder="Nhập nội dung thông báo vào đây..." required></textarea>
                </mat-form-field>

                <div class="form-actions">
                    <button mat-raised-button color="primary" type="submit" class="btn-post" [disabled]="!title || !content">
                        <mat-icon>send</mat-icon> Đăng ngay
                    </button>
                </div>
            </form>
        </mat-card-content>
    </mat-card>
    <div class="history-section">
        <h3 class="section-heading">Tin đã đăng gần đây</h3>
        
        <div class="news-list">
            <div *ngFor="let news of announcements" class="news-card" [class.important-card]="news.isImportant">
                <div class="card-icon-col">
                    <div class="news-icon" [class.important-icon]="news.isImportant">
                        <mat-icon>{{ news.isImportant ? 'priority_high' : 'article' }}</mat-icon>
                    </div>
                </div>
                <div class="card-content-col">
                    <div class="news-header">
                        <span class="news-title">{{ news.title }}</span>
                        <span class="badge" *ngIf="news.isImportant">Quan trọng</span>
                    </div>
                    <p class="news-desc">{{ news.content }}</p>
                    <span class="news-date">
                        <mat-icon>access_time</mat-icon> {{ news.createdAt | date:'dd/MM/yyyy HH:mm' }}
                    </span>
                </div>
                <div class="card-action-col">
                    <button mat-icon-button color="warn" (click)="deleteNews(news.id)" matTooltip="Xóa tin này">
                        <mat-icon>delete_outline</mat-icon>
                    </button>
                </div>
            </div>
            <div *ngIf="announcements.length === 0" class="empty-state">
                <div class="empty-icon">
                    <mat-icon>inbox</mat-icon>
                </div>
                <p>Chưa có thông báo nào được đăng.</p>
            </div>
        </div>
    </div>
</div>
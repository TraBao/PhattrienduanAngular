<div class="profile-page-wrapper" *ngIf="employee; else noData">
    <div class="main-profile-card">
        <div class="cover-photo"></div>
        
        <div class="profile-content">
            <div class="avatar-section">
                <div class="avatar-wrapper">
                    <img *ngIf="avatarDisplay; else textAvatar" [src]="avatarDisplay" class="avatar-img">
                    <ng-template #textAvatar>
                        <div class="avatar-placeholder">
                            {{ employee.firstName.charAt(0) }}
                        </div>
                    </ng-template>
                    
                    <button mat-icon-button class="upload-btn" (click)="fileInput.click()" matTooltip="Đổi ảnh đại diện">
                        <mat-icon>camera_alt</mat-icon>
                    </button>
                    <input type="file" #fileInput hidden (change)="onFileSelected($event)" accept="image/*">
                </div>
            </div>
            <div class="text-center user-identity">
                <h2 class="user-name">{{ employee.lastName }} {{ employee.firstName }}</h2>
                <span class="user-role">{{ employee.jobTitle || 'Nhân viên chính thức' }}</span>
                <p class="user-email"><mat-icon>email</mat-icon> {{ employee.email }}</p>
            </div>

            <mat-divider></mat-divider>
            <div class="info-grid">
                <div class="info-box">
                    <span class="label">Mã nhân viên</span>
                    <strong class="value">#{{ employee.id }}</strong>
                </div>
                <div class="info-box">
                    <span class="label">Phòng ban</span>
                    <strong class="value">Phòng {{ employee.departmentId }}</strong>
                </div>
                <div class="info-box">
                    <span class="label">Ngày sinh</span>
                    <strong class="value">{{ employee.dateOfBirth | date:'dd/MM/yyyy' }}</strong>
                </div>
                <div class="info-box">
                    <span class="label">Số điện thoại</span>
                    <strong class="value">{{ employee.phone || 'Chưa cập nhật' }}</strong>
                </div>
                <div class="info-box full-width">
                    <span class="label">Địa chỉ</span>
                    <strong class="value">{{ employee.address || 'Chưa cập nhật' }}</strong>
                </div>
            </div>
        </div>
    </div>
    <div class="docs-section">
        <div class="section-header">
            <mat-icon>folder_shared</mat-icon> Hồ sơ & Bằng cấp
        </div>
        
        <div class="docs-container">
            <app-employee-docs [employeeId]="employee.id"></app-employee-docs>
        </div>
    </div>
</div>
<ng-template #noData>
    <div class="empty-state-wrapper">
        <mat-card class="empty-card">
            <div class="empty-icon"><mat-icon>person_off</mat-icon></div>
            <h3>Chưa liên kết hồ sơ</h3>
            <p>Tài khoản này chưa được liên kết với dữ liệu nhân sự.</p>
            <p class="sub-text">Vui lòng liên hệ Admin để tạo hồ sơ cho: <strong>{{ employee?.email || 'email này' }}</strong></p>
        </mat-card>
    </div>
</ng-template>